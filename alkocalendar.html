<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–ª–∫–æ–∫–∞–ª–µ–Ω–¥–∞—Ä—å üç∑</title>
    <style>
        :root {
            --bg-color: #f0f2f5;
            --card-bg: #ffffff;
            --primary-color: #7209b7;
            --glass-empty: #e9ecef;
            --glass-full: #f72585;
            --text-color: #212529;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            max-width: 800px;
            width: 100%;
            background: var(--card-bg);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        h1 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 30px;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        select {
            padding: 10px;
            border-radius: 10px;
            border: 1px solid #ddd;
            font-size: 16px;
            outline: none;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: var(--glass-full);
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
        }

        .day-header {
            text-align: center;
            font-weight: bold;
            font-size: 14px;
            color: #6c757d;
            padding-bottom: 10px;
        }

        .day-cell {
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: #fff;
            border: 1px solid #eee;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .day-cell:hover {
            background: #f1f3f5;
            transform: translateY(-2px);
        }

        .day-number {
            font-size: 12px;
            color: #adb5bd;
            position: absolute;
            top: 5px;
            left: 5px;
        }

        .glass-icon {
            font-size: 24px;
            filter: grayscale(100%);
            opacity: 0.3;
            transition: all 0.3s;
        }

        .day-cell.active .glass-icon {
            filter: grayscale(0%);
            opacity: 1;
            transform: scale(1.2);
        }

        .day-cell.empty {
            cursor: default;
            border: none;
            background: transparent;
        }

        .day-cell.empty:hover {
            transform: none;
        }

        @media (max-width: 500px) {
            .calendar-grid { gap: 5px; }
            .glass-icon { font-size: 18px; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>–ê–ª–∫–æ–∫–∞–ª–µ–Ω–¥–∞—Ä—å üç∑</h1>
        
        <div class="stats">
            <div class="stat-card">
                <div>–î–Ω–µ–π –≤ –º–µ—Å—è—Ü–µ</div>
                <div class="stat-value" id="monthStats">0</div>
            </div>
            <div class="stat-card">
                <div>–î–Ω–µ–π –≤ –≥–æ–¥—É</div>
                <div class="stat-value" id="yearStats">0</div>
            </div>
        </div>

        <div class="controls">
            <select id="monthSelect"></select>
            <select id="yearSelect"></select>
        </div>

        <div class="calendar-grid" id="calendarGrid">
            <!-- –î–Ω–∏ –Ω–µ–¥–µ–ª–∏ -->
            <div class="day-header">–ü–Ω</div>
            <div class="day-header">–í—Ç</div>
            <div class="day-header">–°—Ä</div>
            <div class="day-header">–ß—Ç</div>
            <div class="day-header">–ü—Ç</div>
            <div class="day-header">–°–±</div>
            <div class="day-header">–í—Å</div>
            <!-- –°–µ—Ç–∫–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—è –∑–∞–ø–æ–ª–Ω–∏—Ç—Å—è JS -->
        </div>
    </div>

    <script>
        const monthSelect = document.getElementById('monthSelect');
        const yearSelect = document.getElementById('yearSelect');
        const calendarGrid = document.getElementById('calendarGrid');
        const monthStats = document.getElementById('monthStats');
        const yearStats = document.getElementById('yearStats');

        const months = ['–Ø–Ω–≤–∞—Ä—å', '–§–µ–≤—Ä–∞–ª—å', '–ú–∞—Ä—Ç', '–ê–ø—Ä–µ–ª—å', '–ú–∞–π', '–ò—é–Ω—å', '–ò—é–ª—å', '–ê–≤–≥—É—Å—Ç', '–°–µ–Ω—Ç—è–±—Ä—å', '–û–∫—Ç—è–±—Ä—å', '–ù–æ—è–±—Ä—å', '–î–µ–∫–∞–±—Ä—å'];
        const currentYear = new Date().getFullYear();
        const currentMonth = new Date().getMonth();

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—ã–ø–∞–¥–∞—é—â–∏—Ö —Å–ø–∏—Å–∫–æ–≤
        months.forEach((m, i) => {
            const opt = document.createElement('option');
            opt.value = i;
            opt.textContent = m;
            if (i === currentMonth) opt.selected = true;
            monthSelect.appendChild(opt);
        });

        for (let y = currentYear - 2; y <= currentYear + 1; y++) {
            const opt = document.createElement('option');
            opt.value = y;
            opt.textContent = y;
            if (y === currentYear) opt.selected = true;
            yearSelect.appendChild(opt);
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        let data = JSON.parse(localStorage.getItem('alkocalendar_data')) || {};

        function save() {
            localStorage.setItem('alkocalendar_data', JSON.stringify(data));
            updateStats();
        }

        function updateStats() {
            const selectedYear = yearSelect.value;
            const selectedMonth = monthSelect.value;
            
            let mCount = 0;
            let yCount = 0;

            for (const key in data) {
                if (data[key]) {
                    const [y, m, d] = key.split('-');
                    if (y === selectedYear) {
                        yCount++;
                        if (m === selectedMonth) {
                            mCount++;
                        }
                    }
                }
            }
            monthStats.textContent = mCount;
            yearStats.textContent = yCount;
        }

        function renderCalendar() {
            const year = parseInt(yearSelect.value);
            const month = parseInt(monthSelect.value);

            // –û—á–∏—Å—Ç–∫–∞ —Å–µ—Ç–∫–∏ (–æ—Å—Ç–∞–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏)
            const headers = Array.from(calendarGrid.querySelectorAll('.day-header'));
            calendarGrid.innerHTML = '';
            headers.forEach(h => calendarGrid.appendChild(h));

            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();

            // –°–º–µ—â–µ–Ω–∏–µ –¥–ª—è –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞ (–≤ JS 0 - —ç—Ç–æ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ)
            let offset = firstDay === 0 ? 6 : firstDay - 1;

            for (let i = 0; i < offset; i++) {
                const cell = document.createElement('div');
                cell.className = 'day-cell empty';
                calendarGrid.appendChild(cell);
            }

            for (let d = 1; d <= daysInMonth; d++) {
                const dateKey = `${year}-${month}-${d}`;
                const cell = document.createElement('div');
                cell.className = 'day-cell' + (data[dateKey] ? ' active' : '');
                
                cell.innerHTML = `
                    <div class="day-number">${d}</div>
                    <div class="glass-icon">üç∑</div>
                `;

                cell.onclick = () => {
                    data[dateKey] = !data[dateKey];
                    cell.classList.toggle('active');
                    save();
                };

                calendarGrid.appendChild(cell);
            }
            updateStats();
        }

        monthSelect.onchange = renderCalendar;
        yearSelect.onchange = renderCalendar;

        renderCalendar();
    </script>
</body>
</html>
